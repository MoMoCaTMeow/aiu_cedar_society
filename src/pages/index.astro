---
import Layout from '../layouts/Layout.astro';
import { getLectures } from '../library/microcms';

// Fetch lectures
const response = await getLectures({ fields: ["id", "title", "guest_name", "event_date", "eyecatch"] });
const lectures = response.contents;
---

<Layout>
  <div class="bg-white min-h-screen">
    {/* Hero Section */}
    <section class="relative pt-16 md:pt-20 pb-12 md:pb-16 px-4 md:px-6 border-b border-gray-200">
        <div class="container mx-auto max-w-4xl">
            <h1 class="text-3xl md:text-4xl lg:text-6xl font-bold text-gray-900 mb-4 md:mb-6 tracking-tight leading-tight">
                秋田とAIU生の<br/>可能性をつなぐ
            </h1>
            <p class="text-sm md:text-base lg:text-lg text-gray-600 leading-relaxed max-w-2xl">
                AIU Cedar Societyは、学生の熱意と秋田社会の架け橋となります。<br/>
                「出会い・学び・実践」のサイクルを創り出し、秋田の地で新たな価値を生み出すための講演会シリーズ。
            </p>
        </div>
    </section>
    
    {/* Lecture List */}
    <main class="container mx-auto px-4 md:px-6 py-12 md:py-20 max-w-5xl">
        <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-10 md:mb-16 tracking-wide border-l-4 border-[#006837] pl-3 md:pl-4">
            講演会一覧
        </h2>
        
        
        <div>
        {lectures.map((lecture, index) => {
            const isEven = index % 2 === 0;
            const isLast = index === lectures.length - 1;
            return (
                <a href={`/lectures/${lecture.id}`} class="group block">
                    <article class={`flex flex-col ${isEven ? 'md:flex-row' : 'md:flex-row-reverse'} gap-6 md:gap-8 lg:gap-12 items-start ${!isLast ? 'pb-12 md:pb-16 mb-12 md:mb-16 border-b border-gray-200' : ''}`}>
                        {/* Image */}
                        <div class="w-full max-w-[200px] mx-auto md:mx-0 md:w-2/5 md:max-w-none flex-shrink-0">
                            <div class="relative aspect-[210/297] overflow-hidden bg-gray-100 shadow-sm">
                                {lecture.eyecatch ? (
                                    <img 
                                        src={lecture.eyecatch.url} 
                                        alt={lecture.title} 
                                        class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700 ease-out" 
                                    />
                                ) : (
                                    <div class="w-full h-full flex items-center justify-center text-gray-300">
                                        <span class="text-2xl">✦</span>
                                    </div>
                                )}
                                {/* Green accent line */}
                                <div class="absolute bottom-0 left-0 h-1 w-0 bg-[#006837] group-hover:w-full transition-all duration-500"></div>
                            </div>
                        </div>

                        {/* Content */}
                        <div class="flex-1 space-y-3 md:space-y-4">
                            <div class="text-xs font-bold text-[#006837] tracking-wider uppercase">
                                {new Date(lecture.event_date).toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' })}
                            </div>
                            <h3 class="text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 leading-tight group-hover:text-[#006837] transition-colors">
                                {lecture.title}
                            </h3>
                            <p class="text-sm text-gray-600 font-medium">
                                登壇: {lecture.guest_name}
                            </p>
                            <div class="pt-1 md:pt-2">
                                <span class="inline-flex items-center text-sm font-bold text-gray-900 group-hover:text-[#006837] transition-colors min-h-[44px] md:min-h-0">
                                    詳しく見る
                                    <svg class="w-4 h-4 ml-2 transform group-hover:translate-x-2 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                    </article>
                </a>
            );
        })}
        </div>
    </main>
  </div>
</Layout>
