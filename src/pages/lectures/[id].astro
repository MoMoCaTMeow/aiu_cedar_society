---
import Layout from '../../layouts/Layout.astro';
import { getLectures, getLectureDetail } from '../../library/microcms';

export async function getStaticPaths() {
  const response = await getLectures({ fields: ["id"] });
  return response.contents.map((content) => ({
    params: {
      id: content.id,
    },
  }));
}

const { id } = Astro.params;
const lecture = await getLectureDetail(id as string);
---

<Layout>
  <div class="bg-white min-h-screen">
    <div class="container mx-auto px-4 md:px-6 pt-16 md:pt-20 pb-12 md:pb-20 max-w-3xl">
        <a href="/" class="inline-flex items-center text-gray-500 hover:text-[#006837] mb-8 md:mb-12 transition-colors group text-sm font-medium min-h-[44px]">
            <svg class="w-4 h-4 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            一覧に戻る
        </a>

        {/* Content */}
        <article class="max-w-3xl mx-auto">
            {/* Header - Title & Meta */}
            <div class="mb-6 md:mb-8 pb-6 md:pb-8 border-b border-gray-200">
                <div class="text-xs font-bold text-[#006837] tracking-wider uppercase mb-4 md:mb-6">
                    {new Date(lecture.event_date).toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}
                </div>
                <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mb-6 md:mb-8 leading-tight tracking-tight">
                    {lecture.title}
                </h1>
                <div class="flex items-baseline gap-3 mb-8 md:mb-10">
                    <span class="text-xs text-gray-400 font-medium tracking-wider uppercase">登壇者</span>
                    <span class="text-lg md:text-xl font-bold text-gray-900">{lecture.guest_name}</span>
                </div>

                {/* Image - Small and Subtle */}
                {lecture.eyecatch && (
                    <div class="mt-6 md:mt-8 max-w-[160px] md:max-w-[180px] mx-auto">
                        <div class="aspect-[210/297] w-full bg-gray-100 shadow-sm">
                            <img 
                                src={lecture.eyecatch.url} 
                                alt={lecture.title} 
                                class="w-full h-full object-cover" 
                            />
                        </div>
                    </div>
                )}
            </div>

            {/* Body Content */}
            <div class="prose prose-lg max-w-none leading-relaxed text-gray-700 prose-headings:font-bold prose-headings:text-gray-900 prose-a:text-[#006837] prose-a:no-underline hover:prose-a:underline prose-strong:text-gray-900 prose-strong:font-bold">
                <div set:html={lecture.content} />
            </div>

            {/* Footer */}
            <div class="mt-20 pt-8 border-t border-gray-200 text-center">
                <p class="text-xs text-gray-400 tracking-wider font-medium">
                    AIU CEDAR SOCIETY
                </p>
            </div>
        </article>
    </div>
  </div>
</Layout>
